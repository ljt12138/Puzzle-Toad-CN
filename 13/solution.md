## 解答

答案是肯定的。如果函数 $f$ 存在 $i$ 和 $X\in \{A, B, C\}$ 使得
$$
f(x_1, x_2, \dots, x_{i-1}, X, x_{i+1}, \dots, x_n)
$$
仅有一种取值，我们称 $(i, X)$ 是函数 $f$ 的**支配对**。如果函数 $f$ 存在 $i$ 和 $h$ 且
$$
f(x_1, x_2, \dots, x_n) = h(x_i)
$$
我们称 $i$ 是函数 $f$ 的**支配者**，原问题即要求我们证明所有函数都有支配者。

**引理1：**任何满足限制的函数，有支配对必有支配者。

**证明：**不失一般性假设 $i=n$ 且 $X=A$，用 $S, S' $ 简记 $x_1, x_2, \dots, x_{n-1}$ 的所有不同可能，那么就有
$$
f(S, A) = f(S', A)
$$
如果说存在 $X'\in \{B, C\}$ 使得 $(i, X')$ 不是支配对，不妨设 $X' = B$，换言之存在 $S, S'$ 使得
$$
f(S, B)\ne f(S', B)
$$
设 $S''$ 是每一位都和 $S, S'$ 不同的 $x_1, x_2, \dots, x_{n-1}$ 的状态，那么
$$
f(S, A), f(S'', C), f(S, B), f(S', B)
$$
两两不同，根据鸽巢原理这是不可能的。

*其中 $f(S, A)=f(S'', A)\ne f(S, B)$，同理有 $f(S, A)\ne f(S', B)$。*

**定理：**任何满足限制的函数都有支配者。

**证明：**对 $n$ 施归纳法，说明任何 $n$ 元函数都有支配者。$n\le 2$ 的情景容易验证，当 $n>2$ 时，定义如下三个函数：
$$
f_1(x_1, x_2, \dots, x_{n-1}) = f(x_1, x_2, \dots, x_{n-1}, A)\\
f_2(x_1, x_2, \dots, x_{n-1}) = f(x_1, x_2, \dots, x_{n-1}, B)\\
f_3(x_1, x_2, \dots, x_{n-1}) = f(x_1, x_2, \dots, x_{n-1}, C)
$$
若 $x_n$ 不是 $f$ 的支配者，那么必然不存在支配对 $(x_n, X)$，换言之 $f_1, f_2, f_3$ 均具有至少两种不同的取值，根据鸽巢原理，任意两者之间取值都有交。下面我们说明一个引理。

**引理2：**$f_1, f_2, f_3$ 具有相同的支配者。

一旦上面的引理成立，问题便规约为了 $n=2$ 的情景，这便立刻说明了他们共同的支配者也是 $f$ 的支配者。

**引理2的证明：**根据归纳假设他们均有支配者。若支配者不同，不妨设 $f_1, f_2 $ 分别具有支配者 $1$ 和 $2$。由于 $f_1, f_2$ 取值有交，不妨设恰是：
$$
f_1(A, x_2, x_3, \dots, x_n) = f_2(x_1', B, x_3', \dots, x_n')
$$
那么也有：
$$
f_1(A, C, x_3, \dots, x_n) = f_2(C, B, x_3', \dots, x_n')
$$
其中取 $x_i'\ne x_i$，这意味着：
$$
f(A, C, x_3, \dots, x_n, A) = f(C, B, x_3', \dots, x_n', B)
$$
而这两者逐位不同，这与 $f$ 是满足限制的函数矛盾。