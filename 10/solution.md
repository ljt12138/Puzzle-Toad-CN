## 解答

首先给 $n$ 个人编号为 $1, 2, 3, \dots, n$。接下来他们等概率生成一个随机的排列 $p$，第 $i$ 个人按照这样的策略操作：

- 首先翻开写有 $p_i$ 的卡片，假设这张卡片写有第 $k$ 个人的名字，就翻开 $p_k$，以此类推。

我们假设背面写有 $i$ 的卡片正面写着编号为 $q_i$ 的人的名字，那么依次翻开的卡片正是：
$$
i, p_{q_{i}}, p_{q_{p_{q_i}}}, \dots
$$
将排列看成置换，也就是：
$$
(pq)^0(i), (pq)^1(i), (pq)^2(i), (pq)^3(i), \dots
$$
容易发现，当且仅当 $pq$ 中 $i$ 所在的循环长度超过 $n/2$ 时，第 $i$ 个人会失败。那么对于所有 $n$ 个人而言，当且仅当存在一个大于一半的循环，他们会失败。

由于 $p$ 是均匀随机的，$pq$ 也是均匀随机的，那么失败率便为随机排列中存在长度大于一半的循环的概率，这正是：
$$
\frac{1}{n!}\sum_{n/2<k\le n}{n\choose k}(n-1)!(n-k)!=H_n-H_{\lfloor n/2\rfloor}
$$
当 $n$ 为偶数时，可以近似为：
$$
\ln n-\ln \frac n 2=\ln 2
$$
当 $n$ 为奇数时，可以近似为：
$$
\ln n-\ln \frac{n-1}{2} = \ln\left(2+\frac{2}{n-1}\right)=\ln 2+\ln\left(1+\frac{1}{n-1}\right)\le \ln2+\frac{1}{n-1}
$$
